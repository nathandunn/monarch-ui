(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["search"],{"2d3b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"selenium_id_content"}},[s("div",{staticClass:"container-fluid monarch-container",attrs:{id:"monarch-search-container"}},[t._m(0),s("div",{staticClass:"row"},[s("div",{staticClass:"container col-md-3"},[t.categoryFilters.length>0||t.taxonFilters.length>0?s("div",{staticClass:"b-row card"},[s("div",{staticClass:"card-header"},[t._v("\n            Filters\n          ")]),t.categoryFilters.length>0?s("div",[s("div",{staticClass:"offset-1 font-weight-bold"},[t._v("Categories")]),s("ul",t._l(t.categoryFilters,function(e){return s("li",{key:e,staticClass:"b-row",attrs:{href:""}},[t._v("\n                "+t._s(e)+"\n                "),s("button",{staticClass:"fa fa-remove",on:{click:function(s){return t.removeCategoryFilter(e)}}})])}),0)]):t._e(),t.taxonFilters.length>0?s("div",[s("div",{staticClass:"offset-1 font-weight-bold"},[t._v("Taxa")]),s("ul",t._l(t.taxonFilters,function(e){return s("li",{key:e,staticClass:"b-row",attrs:{href:""}},[t._v("\n                "+t._s(e)+"\n                "),s("button",{staticClass:"fa fa-remove",on:{click:function(s){return t.removeTaxonFilter(e)}}})])}),0)]):t._e()]):t._e(),s("div",{staticClass:"b-row card",staticStyle:{"margin-top":"20px"}},[s("div",{staticClass:"card-header"},[t._v("\n            Categories\n          ")]),s("div",{staticClass:"card-body"},[s("ul",{staticClass:"showFacetLinks col-md-12"},t._l(t.facetCategories,function(e,a){return s("li",{key:a},[s("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.addCategoryFilter(a)}}},[t._v("\n                  "+t._s(a)+"\n                  "),s("div",{staticClass:"pull-right"},[t._v("\n                    "+t._s(e)+"\n                  ")])])])}),0)])]),s("div",{staticClass:"b-row card",staticStyle:{"margin-top":"20px"}},[s("div",{staticClass:"card-header"},[t._v("\n            Taxa\n          ")]),s("div",{staticClass:"card-body"},[s("ul",{staticClass:"showFacetLinks  col-md-12"},t._l(t.facetTaxons,function(e,a){return s("li",{key:a},[s("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.addTaxonFilter(a)}}},[t._v("\n                  "+t._s(a)+"\n                  "),s("div",{staticClass:"pull-right"},[t._v("\n                    "+t._s(e)+"\n                  ")])])])}),0)])])]),s("div",{staticClass:"col-md-8"},[s("b-pagination",{staticClass:"table-sm table-border-soft mt-2",attrs:{"total-rows":t.numFound,"per-page":t.rowsPerPage,responsive:"true",size:"md"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),s("div",{staticClass:"search-results-rows"},[t.searchResults&&t.searchResults.length>0?s("div",[s("h3",[s("span",{staticClass:"searchTerm"},[t._v(t._s(t.query))]),t._v(" has "),s("span",{staticClass:"searchTerm"},[t._v(t._s(t.numFound))]),t._v(" matches")]),s("b-table",{ref:"results-table",staticClass:"table-sm table-border-soft test-search-results-table",attrs:{fields:t.fields,items:t.rowsProvider,"current-page":t.currentPage,"per-page":t.rowsPerPage,striped:"",responsive:"true",hover:""},scopedSlots:t._u([{key:"label",fn:function(e){return[s("router-link",{attrs:{to:e.item.toLink}},[t._v("\n                  "+t._s(e.item.label)+"\n                ")])]}},{key:"highlight",fn:function(e){return[s("span",{domProps:{innerHTML:t._s(e.item.highlight)}})]}}],null,!1,280307061)})],1):t._e()])],1),s("monarch-footer")],1)])])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"intro"},[s("div",{staticClass:"intro-body"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12 py-2"},[s("p",{staticClass:"intro-text"},[t._v("\n                Search Results\n              ")])])])])])])}],i=s("a34a"),n=s.n(i),o=s("a74f");function c(t,e,s,a,r,i,n){try{var o=t[i](n),c=o.value}catch(l){return void s(l)}o.done?e(c):Promise.resolve(c).then(a,r)}function l(t){return function(){var e=this,s=arguments;return new Promise(function(a,r){var i=t.apply(e,s);function n(t){c(i,a,r,n,o,"next",t)}function o(t){c(i,a,r,n,o,"throw",t)}n(void 0)})}}var h=25,u={name:"Search",components:{"monarch-footer":s("a794").default},data:function(){return{facets:[],user_facets:{},results:[],highlight:{},searchResults:[],currentPage:1,rowsPerPage:h,categoryFilters:[],taxonFilters:[],facetCategories:[],facetTaxons:[],numFound:0,numRowsDisplayed:0,selenium_id:"",searching:!0,fields:[{key:"label",label:"Term"},{key:"category",label:"Category"},{key:"taxon",label:"Taxon"},{key:"highlight",label:"Matching String"}]}},watch:{$route:function(t,e){this.searchViaRouteParams(),this.$refs["results-table"].refresh()}},mounted:function(){this.searchViaRouteParams()},methods:{addTaxonFilter:function(t){this.taxonFilters.push(t),this.search(),this.$refs["results-table"].refresh()},removeTaxonFilter:function(t){this.taxonFilters=this.taxonFilters.filter(function(e){return e!==t}),this.search(),this.$refs["results-table"].refresh()},addCategoryFilter:function(t){this.categoryFilters.push(t),this.search(),this.$refs["results-table"].refresh()},removeCategoryFilter:function(t){this.categoryFilters=this.categoryFilters.filter(function(e){return e!==t}),this.search(),this.$refs["results-table"].refresh()},searchViaRouteParams:function(){this.query=this.$route.params.query,this.rowsPerPage=this.$route.params.rows?this.$route.params.rows:h,this.search()},rowsProvider:function(t,e){var s=this;this.search().then(function(t){e(s.searchResults)}).catch(function(t){e([])})},search:function(){var t=l(n.a.mark(function t(){var e,s,a=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=(this.currentPage-1)*this.rowsPerPage,t.next=4,o["h"](this.query,e,this.rowsPerPage,this.categoryFilters,this.taxonFilters);case 4:s=t.sent,this.searchResults.length=0,this.facetCategories=s.facet_counts.category,this.facetTaxons=s.facet_counts.taxon_label,this.numFound=s.numFound,s.docs.forEach(function(t,e){var r=s.highlighting[t.id],i={category:t.category[0],taxon:t.taxon_label,label:t.label[0],curie:t.id,rows:a.rows,highlight:r.highlight,toLink:"/"+t.category[0]+"/"+t.id,match:r.match,hasHighlight:r.has_highlight};a.searchResults.push(i)}),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),console.log("Search ERROR",t.t0,this);case 15:case"end":return t.stop()}},t,this,[[0,12]])}));function e(){return t.apply(this,arguments)}return e}()}},f=u,d=(s("3de7"),s("2877")),v=Object(d["a"])(f,a,r,!1,null,null,null);e["default"]=v.exports},"3de7":function(t,e,s){"use strict";var a=s("f32b"),r=s.n(a);r.a},f32b:function(t,e,s){}}]);
//# sourceMappingURL=search.5371c676.js.map